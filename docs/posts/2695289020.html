<!DOCTYPE html>
<html lang="en">
    <meta charset="utf-8" /><meta name="generator" content="Hugo 0.68.3" /><meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
    <meta name="color-scheme" content="light dark" />
    <meta name="supported-color-schemes" content="light dark" />
    <title>.Net Core 单文件部署 - ONEO</title>
    <link rel="stylesheet" href="/assets/style.css" />
    <link rel="shortcut icon" href="/assets/favicon.png" type="image/x-icon">
    <body>
        <div class="base-body">
            <section id="header" class="site header">
                <div class="header wrap">
                    <span class="header left-side">
                        <a class="site home" href="https://oneo.me/"><span class="site name">ONEO</span></a>
                    </span>
                    <span class="header right-side">
                        <div class="nav wrap">
                            <nav class="nav">
                                <a class="nav item" href="https://oneo.me/">首页</a>
                            </nav>
                        </div>
                    </span>
                </div>
                <div class="site slogan"><span class="title">每个人都能找到最终的归宿</span></div>
            </section>

            <div class="article-container">
                <section class="article header">
                    <h1 class="article title">.Net Core 单文件部署</h1>
                    <p class="article date">2020-10-31</p>
                </section>
                <article class="article markdown-body">
                    <h2>不可用 API</h2>
<table>
<thead>
<tr>
<th>API</th>
<th>返回值</th>
</tr>
</thead>
<tbody>
<tr>
<td>Assembly.Location</td>
<td>空字符串</td>
</tr>
<tr>
<td>Module.FullyQualifiedName</td>
<td>&lt;Unknown&gt; 字符串，或引发异常</td>
</tr>
<tr>
<td>Module.Name</td>
<td>&lt;Unknown&gt; 字符串</td>
</tr>
<tr>
<td>Assembly.GetFile</td>
<td>引发 IOException</td>
</tr>
<tr>
<td>Assembly.GetFiles</td>
<td>引发 IOException</td>
</tr>
<tr>
<td>Assembly.CodeBase</td>
<td>引发 PlatformNotSupportedException</td>
</tr>
<tr>
<td>Assembly.EscapedCodeBase</td>
<td>引发 PlatformNotSupportedException</td>
</tr>
<tr>
<td>AssemblyName.CodeBase</td>
<td>null</td>
</tr>
<tr>
<td>AssemblyName.EscapedCodeBase</td>
<td>null</td>
</tr>
</tbody>
</table>
<h2>项目文件</h2>
<pre><code class="language-xml">&lt;Project&gt;
    &lt;PropertyGroup&gt;
        &lt;!-- 使用 AppHost --&gt;
        &lt;UseAppHost&gt;true&lt;/UseAppHost&gt;
        &lt;!-- 设置目标 --&gt;
        &lt;RuntimeIdentifier&gt;win10-x64&lt;/RuntimeIdentifier&gt;
        &lt;!-- 设置单文件 --&gt;
        &lt;PublishSingleFile&gt;true&lt;/PublishSingleFile&gt;
        &lt;!-- 设置不依赖框架 --&gt;
        &lt;SelfContained&gt;true&lt;/SelfContained&gt;
        &lt;!-- 裁剪输出程序集 --&gt;
        &lt;PublishTrimmed&gt;true&lt;/PublishTrimmed&gt;
        &lt;!-- 嵌入 PDB --&gt;
        &lt;DebugType&gt;embedded&lt;/DebugType&gt;
    &lt;/PropertyGroup&gt;
&lt;/Project&gt;
</code></pre>
<h2>命令行调用</h2>
<p>单文件无依赖程序</p>
<pre><code class="language-bash">dotnet publish -r win-x64 -p:PublishSingleFile=true --self-contained true
</code></pre>
<p>单文件框架依赖</p>
<pre><code class="language-bash">dotnet publish -r win-x64 -p:PublishSingleFile=true
</code></pre>

                </article>
            </div>
            <section id="footer" class="footer">
                <div class="footer-wrap">
                    <p class="copyright">© 2020 ONEO <a href="http://beian.miit.gov.cn" target="blank">桂ICP备15007841号-1</a></p>
                    <p class="powerby"><span>Powered by </span><a href="https://github.com/1217950746/Sheep" target="_blank">Sheep</a><span> and the </span><a href="https://themes.gohugo.io/hugo-notepadium/"
                        target="_blank">Notepadium</a></p>
                </div>
            </section>
        </div>
    </body>
</html>

